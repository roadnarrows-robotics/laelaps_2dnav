<launch>

  <!-- Start Geofrenzy Node -->
  <node name="gf_server_168" pkg="geofrenzy" type="gf_server" args="_gf_class_index:=168" output="screen" />
  <param name="gf_server_168/geojson_file" type="str" value="/home/woundzoom/catkin_ws/src/laelaps_2dnav/samplefences/playground_fences.json" />

  <!-- Start Geofrenzy Map Server -->
  <node name="gf_map_server_168" pkg="geofrenzy" type="gf_map_server" args="_gf_class_index:=168" output="screen">
    <remap from="gf_map_server_168/geofrenzy/map" to="/map"/>
    <remap from="gf_map_server_168/geofrenzy/map_metadata" to="/map_metadata"/>
  </node>

  <!-- Run TF broadcaster -->
  <node name="tf_broadcaster" pkg="robot_setup_tf" type="tf_broadcaster"/>

  <!-- Start Pointcloud to Laser node -->
  <node name="pointcloud_to_laserscan_node" pkg="pointcloud_to_laserscan" type="pointcloud_to_laserscan_node">
    <remap from="scan" to="scan_from_pointcloud"/>
    <param name="use_inf" type="boolean" value="false"/>
    <param name="target_frame" type="str" value="laser_0" /> 
  </node>

  <!-- Start pointcloud publisher for testing only -->
  <node name="pub_pcl" pkg="laelaps_2dnav" type="pcl_publisher"/>

  <!-- Run AMCL -->
  <!-- <include file="$(find amcl)/examples/amcl_diff.launch" /> -->

  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam file="$(find laelaps_2dnav)/params/costmap_common_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find laelaps_2dnav)/params/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find laelaps_2dnav)/params/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find laelaps_2dnav)/params/global_costmap_params.yaml" command="load" />
    <rosparam file="$(find laelaps_2dnav)/params/base_local_planner_params.yaml" command="load" />
    <rosparam file="$(find laelaps_2dnav)/params/base_global_planner_params.yaml" command="load" />
    <param name="controller_frequency" value="10.0" />
  </node>
  
  <!-- Launch RVIZ -->
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find laelaps_2dnav)/launch/laelaps_2dnav.rviz"/>
</launch>
